---
layout: default
languages: ["english", "german", "french", "italian"]
---
<h2>Selection {{ page.year }}</h2>
<!-- <p>{{ page.date | date: "%-d %B %Y" }}</p> -->
<p>
    <strong>Number of participants:</strong> {{ page.participant-count }} <br>
    <strong>Exam files:</strong> 
    {% for lang in layout.languages %}
        {% assign round = page.round | replace: " ", "-" | downcase %}
        {% assign name = round | append: "-" | append: page.year | append: "-" | append: lang | append: ".pdf" %}
        {% assign file = site.static_files | where: "name", name | first %}
        {% if file %}
            <a href="{{ file.path }}" style="margin: 0 3px">{{ lang | capitalize }}</a>
        {% endif %}
    {% endfor %}
</p>

{% assign problems = site.problems | where: "year", page.year | where: "round", "Selection" %}

{% if problems.size != page.problem-count %}
    ERROR: PROBLEM COUNT MISSMATCH
{% endif %}

<h3>Distribution</h3>

<div class="overflow-wrapper" id="distribution-container"></div>

<h3>Scores</h3>

<table class = "scores">
    <thead>
        <tr>
            <th>Rank</th>
            <th>Name</th>
            {% for problem in problems %}
                <th class = "center">P{{ problem.number }}</td>
            {% endfor %}
            <th class = "center">Total</th>
            <th class = "center">Team</th>
        </tr>
    </thead>
    <tbody>
        {% for participant in page.participants %}
        <tr id="results-row-{{participant.first-name}}-{{participant.last-name}}" class="results-row">
            <td>{{ participant.rank }}</td>
            {% assign pp = site.participants | where: "first-name", participant.first-name | where: "last-name", participant.last-name | first %}
            <td>
                {% if pp %}
                    <a href="{{ pp.url }}">{{ participant.first-name }} {{ participant.last-name }}</a>
                {% else %}
                    {{ participant.first-name }} {{ participant.last-name }}
                {% endif %}
            </td>
            {% for problem in problems %}
                <td class = "center">{{ participant.scores[forloop.index0] }}</td>
            {% endfor %}
            <td class = "center">{{ participant.total }}</td>
            <td class = "center award {{ participant.award | downcase }}">{{ participant.award }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% include statistics.html %}

<h3>Contest Problems</h3>

<div id="problems-container"></div>

<script src="/assets/js/problem-loader.js"></script>
<script>
// Get problem IDs from Jekyll
const problemIds = [
    {% for problem in problems %}
    "{{ problem.path | split: "/" | last | replace: ".html", "" }}"{% unless forloop.last %},{% endunless %}
    {% endfor %}
];

const container = document.getElementById('problems-container');
window.addEventListener('DOMContentLoaded', () => {
  loadProblems(problemIds, container);
});
</script>

