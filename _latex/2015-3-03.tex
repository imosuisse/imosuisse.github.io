Determine all functions $f\colon\mathbb{R}\to\mathbb{R}$ such that
\[
    (y+1)f(x) + f(xf(y)+f(x+y))=y
\]
for all $x,y \in \mathbb{R}$.


