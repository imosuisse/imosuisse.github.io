Find all functions $f\colon\mathbb{R} \rightarrow \mathbb{R}$ such that
for all $x,y \in \mathbb{R}$ the following holds:
$$f(f(x)-y^2)=f(x)^2-2f(x)y^2+f(f(y)).$$